---
title: session和JWT身份认证
---

### 为什么需要身份验证?

由于http本身是一个无状态的协议，他不会记录每次发送请求的用户的信息，这样就会导致服务器无法识别是哪个用户发送了请求；



### session的认证机制

1. web端向服务端发送身份验证请求;
2. 服务端先验证数据库中是否存在传过来的账号密码，然后获取相关信息，并通过session方法将信息存储在一个sessionID密钥中，并将sessionID密钥放在cookie中保存并返回给客户端；
3. 后来每次发送请求时都会携带这个sessionID到服务器，服务器根据这个唯一的ID值查询对应的用户信息并进行返回。



### 什么是cookie

cookie是存储在浏览器里的一段不超过4KB的字符串，它是由一个名称(Name) 和 值(Value) 以及其他几个用于控制 Cookie 有效期, 安全性, 使用范围的可选属性组成的；



### cookie的作用

 不用域名下的 Cookie 信息是独立的, 每当客户端发送请求时, 会自动把当前域名下所有未过期的 Cookie添加到请求头, 一同发送到服务器；



### cookie的特性

1. 自动发送；

2. 域名独立(不能跨域)；

3. 过期时限；

4. 不超过4KB；



### JWT身份认证

1. 客户端发送身份验证请求;
2. 服务端验证身份，验证通过后，将用户的信息经过加密后生产Token字符串，并返回给客户端;
3. Token值**手动**添加到localStorage或者SessionStorage中；
4. 客户端再次发送请求后，需将Token值**手动**添加到Authorization中，一并传给服务端，后端再将Token值进行解密还原成用户的信息对象;



### session和JWT身份认证的区别

由于session身份认证存在以下缺点:

1. session存储在服务器的内存中，会影响内存的开销；
2. session无法跨域；
3. 由于session存储在内存中，所以session拓展性不强；
4. 安全性低；

而JWT身份认证可以很好的避免这些缺点；